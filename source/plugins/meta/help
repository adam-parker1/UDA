
The META server side function library provides access to the IDAM Metadata registry and archived metadata files. 

The registry records different broad classes of metadata. Access to these depends on the data request context. 
There are three contexts:
	META means the metadata recorded in the registy. 
	DATA means the metadata recorded in separate files archived in the data respository. 
	CPF means the high level plasma classification data recorded in the CPF database.
	 
The META library provides functions to retrieve the required information as well as describing what information is available, 
enabling the concept of Data Discovery.

There are two library functions:
	listData - used for data discovery. 
	getData - used to access sources of metadata other than the IDAM registry
	
The calling syntax of these functions, with use case examples, are as follows:	

Function: listData(context={meta|data|cpf} [,{cast|align}={row|column}] [,class=class] [,system=system]
                   [,{config|configuration}=configuration] [,device=device]
                   [,{shot|pulno|exp_number}=shot]
                   [,version=version] [,revision=revision]
                   [,{source|alias|source_alias}=source_alias] [,type={A|R|M|I|*}] [,pass=pass]
                   [,description=description] [,table=table]
                   [,/listclasses] [,/listsources] [,/structure])

This function is used for data discovery and returns a list of the meta data available (not the data itself) for a 
specific shot and/or metadata class etc. Arguments are as follows

	context defines which class of metadata required. The default is META.
	cast or align specifies the orientation of the data within the returned data structures: row or column orientation
	class
	system
	config or configuration
	device
	shot or pulno or exp_number
	pass
	version
	revision
	source or alias or source_alias
	type
	description
	table

The meanings of keywords are:

	listclasses (with context={meta|cpf}) - return a list of metadata classes available.
	listsources (with context=data) - return a list of data sources metadata available for a specific shot.
	structure (with context=meta) - return the associated data structure definitions (work in progress!).

IDL Examples:

	List all available data sources for a given MAST shot
	
		str=getdata('meta::listdata(context=data, /listSources)', '17300') or
		str=getdata('meta::listdata(context=data, shot=17300, /listSources)', '')
		
	List all available data signals (Raw, Analysed, or Modelled) for a given MAST shot
	
		str=getdata('meta::listdata(context=data, shot=23456), type=A', 'MAST::')
		
	List metadata classes for a specific context
	
		str=getdata('meta::listdata(context=meta, /listClasses)','') or
		str=getdata('meta::listdata(context=cpf, /listClasses)','')
		
	List all available metadata
	
		str=getdata('meta::listdata(context=meta)','')


Function: getData(context={meta|cpf|data} [,{cast|align}={row|column}] [,class=class] [,system=system]
                  [,configuration=configuration] [,device=device]
                  [,{shot|pulno|exp_number}=shot]
                  [,version=version] [,revision=revision]
                  [,names="var1,var2,var3,..."] [,table=table] [,where=where] [,limit=limit]
                  [,/lastshot] [,/shotdatetime] [,/latest])

This function is used to return the actual metadata requested. If the context is 'meta', the selection criteria must be 
sufficient to identify a single metadata registry record, otherwise the ambiguity will cause an error.

Arguments are as decribed above with the following additions:

	names
	where
	limit

The meanings of keywords are:

	lastshot (with context=data) - return the last shot number recorded for the default device.
	shotdatetime (with context=data) - return the date and time of a specific plasma shot for the default device.
	latest (with context=meta) - return the latest metadata version and revision.

IDL Examples:

	Get the Soft X-Ray camera configuration data
	
		str=getdata('meta::getdata(context=meta,class=diagnostic,system=sxr)', '')
		
	Get the Omaha magnetic coil names and locations
	
		str=getdata('meta::getdata(context=meta,class=magnetic,system=omaha,configuration=specview,version=1,revision=1,shot=17301)', '')
		
	Get the set of coordinates that map out the limiting surfaces inside the MAST vessel
	
		str=getdata('meta::getdata(context=meta,class=structure,configuration=limiter)','')
		
	Get the last shot number
	
		str=getdata('meta::getdata(context=data,/lastshot)','')
		
	Get the data and time of a shot
	
		str=getdata('meta::getdata(context=data,shot=13500,/shotdatetime)','')
		
	Get plasma classification data from the CPF
	
		str=getdata('meta::getData(context=cpf,names="exp_number,tstart,tend",table=mast0,where="tend>=0.4 ORDER BY exp_number desc",limit=99,cast=column)','')

}
